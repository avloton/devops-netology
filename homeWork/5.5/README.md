# Домашнее задание к занятию "5.5. Оркестрация кластером Docker контейнеров на примере Docker Swarm"

---

## Задача 1

Дайте письменые ответы на следующие вопросы:

- В чём отличие режимов работы сервисов в Docker Swarm кластере: replication и global?

**Ответ:** В режиме replication мы задаем количество реплик сервиса, которые Swarm должен развернуть в кластере.
В режиме global мы указываем Swarm развернуть сервис на каждой ноде в кластере (можно указать ограничения, чтобы нода соответствовала определенным требованиям).

- Какой алгоритм выбора лидера используется в Docker Swarm кластере?

**Ответ:** Алгорит распределенного консенсуса Raft.

- Что такое Overlay Network?

**Ответ:** Overlay Network - это сеть, которая построена поверх нижележащей сети (например, физической). 
При использовании Overlay Network становится возможным запускать новые службы без переконфигурации нижележащей сети.
Участники Overlay Network, как правило, ничего не знают об устройстве нижележащей сети.


## Задача 2

Создать ваш первый Docker Swarm кластер в Яндекс.Облаке

Для получения зачета, вам необходимо предоставить скриншот из терминала (консоли), с выводом команды:
```
docker node ls
```

**Ответ:**

![alt_text](https://github.com/avloton/devops-netology/raw/main/homeWork/5.5/img/swarm_nodes.png)


## Задача 3

Создать ваш первый, готовый к боевой эксплуатации кластер мониторинга, состоящий из стека микросервисов.

Для получения зачета, вам необходимо предоставить скриншот из терминала (консоли), с выводом команды:
```
docker service ls
```

**Ответ:**

![alt_text](https://github.com/avloton/devops-netology/raw/main/homeWork/5.5/img/swarm_services.png)


## Задача 4 (*)

Выполнить на лидере Docker Swarm кластера команду (указанную ниже) и дать письменное описание её функционала, что она делает и зачем она нужна:
```
# см.документацию: https://docs.docker.com/engine/swarm/swarm_manager_locking/
docker swarm update --autolock=true
```

**Ответ:**

![alt_text](https://github.com/avloton/devops-netology/raw/main/homeWork/5.5/img/swarm_lock.png)

Данная команда обеспечивает дополнительный уровень защиты за счет того, что теперь мы будем владеть ключами шифрования
и можем осуществлять их ротацию по мере необходимости.
Данные ключи используются для шифрования логов Raft и коммуникации между нодами в кластере
Также, при перезапуске сервиса Docker, теперь потребуется ручная разблокировка ноды.