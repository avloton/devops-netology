# Домашнее задание к занятию "10.01. Зачем и что нужно мониторить"

## Обязательные задания

1. Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект представляет из себя
   платформу для вычислений с выдачей текстовых отчетов, которые сохраняются на диск. Взаимодействие с платформой
   осуществляется по протоколу http. Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы
   выведите в мониторинг и почему?

**Ответ:**

Минимально необходимые метрики:

- Процент свободного места на диске.

Так как отчеты сохраняются на диск, то есть риск, что на диске закончится место.

- Наличие кода ответа по HTTP.

Процесс сервиса может неожиданно завершиться или стать недоступным по сети.

- Уровень загрузки CPU.
 
В какой-то момент ресурсов CPU может стать недостаточно.
Или будет запущен отчет, который займет все ресурсы CPU, таким образом, что формирование остальных отчетов станет затруднено.

2. Менеджер продукта посмотрев на ваши метрики сказал, что ему непонятно что такое RAM/inodes/CPUla. Также он сказал,
   что хочет понимать, насколько мы выполняем свои обязанности перед клиентами и какое качество обслуживания. Что вы
   можете ему предложить?

**Ответ:**

Команде, совместно с менеджером, необходимо разработать метрики SLO, SLA и SLI.

Возможный пример для текущего проекта:
- SLA: 
  + Гарантируется, что сервис успешно сформирует 90% отчетов из поступивших запросов.
  + Гарантируется, что максимальное время формирования отчета - 24 часа с момента поступления запроса HTTP.
  + Если данные гарантии не исполняются, то компания готова возместить возможные финансовые убытки пользователю.
- SLO:
  + Обеспечить доступность сервиса 99% в год.
  + Среднее время формирования отчета не должно превышать 12 часов (12 часов остается на запас для непредвиденных ситуаций).
  + В 95% запросах, в течение года, сервис должен успешно отвечать (коды 2xx/3xx HTTP) и формировать отчет.
- SLI:
  + Необходимо собирать метрику доступности сервиса HTTP.
  + Необходимо для каждого пользователя фиксировать время формирования отчета и вычислять среднее значение.
  + Необходимо фиксировать коды HTTP ответов.

3. Вашей DevOps команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики в свою
   очередь хотят видеть все ошибки, которые выдают их приложения. Какое решение вы можете предпринять в этой ситуации,
   чтобы разработчики получали ошибки приложения?

**Ответ:**

Можно развернуть систему Sentry, которая будет перехватывать исключения.
Но разработчикам необходимо будет выполнить доработку на уровне приложения чтобы исключения автоматически отправлялись в Sentry. 

4. Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA=99% по http кодам ответов.
   Вычисляете этот параметр по следующей формуле: summ_2xx_requests/summ_all_requests. Данный параметр не поднимается выше
   70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?

**Ответ:**

В формуле не учтены все положительные коды HTTP ответов.
Корректная формула будет выглядеть так:

`(summ_2xx_requests + summ_3xx_requests)/summ_all_requests`


### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---