## Домашнее задание к занятию "4.1. Командная оболочка Bash: Практические навыки"

### Обязательная задача 1

Есть скрипт:
```bash
a=1
b=2
c=a+b
d=$a+$b
e=$(($a+$b))
```

Какие значения переменным c,d,e будут присвоены? Почему?

| Переменная  | Значение | Обоснование |
| ------------- | ------------- | ------------- |
| `c`  | a+b | В данном случае мы с `a` и `b` не обращались как с переменными, поэтому получилась просто строка `a+b`. |
| `d`  | 1+2 | По умолчанию в `bash` все переменные являются строкой, поэтому мы получили строку из значений двух переменных. |
| `e`  | 3 | Здесь мы указали `bash` выполнить арифметическую операцию при помощи `$(( ))`, поэтому переменные были интерпертированы как числа и сделано корректное сложение. |


### Обязательная задача 2
На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным (после чего скрипт должен завершиться). В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить:
```bash
while ((1==1)
do
	curl https://localhost:4757
	if (($? != 0))
	then
		date >> curl.log
	fi
done
```

#### Ответ:

В скрипт необходимо добавить выход из цикла. В итоге скрипт должен выглядеть следующим образом:
```bash
while ((1==1))
do
        curl https://localhost:4757
        if (($? != 0))
        then
                date >> curl.log
        else
                echo 'OK'
                break
        fi
done
```

Необходимо написать скрипт, который проверяет доступность трёх IP: `192.168.0.1`, `173.194.222.113`, `87.250.250.242` по `80` порту и записывает результат в файл `log`. Проверять доступность необходимо пять раз для каждого узла.

#### Ваш скрипт:
```bash
#!/usr/bin/env bash

IPS=( '192.168.0.1' '173.194.222.113' '87.250.250.242' )

for ip in ${IPS[@]}
do
        for i in {1..5}
        do
                echo "Checking $ip ..."
                sleep 1
                curl --connect-timeout 2 http://$ip >> log 2>/dev/null
                if [ "$?" -eq 0 ]
                then
                        echo "OK"
                        break
                fi
        done
done
```

### Обязательная задача 3
Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается.

#### Ваш скрипт:
```bash
#!/usr/bin/env bash

IPS=( '192.168.0.1' '173.194.222.113' '87.250.250.242' )

for ip in ${IPS[@]}
do
        for i in {1..5}
        do
                echo "Checking $ip ..."
                sleep 1
                curl --connect-timeout 2 http://$ip >> log 2>/dev/null
                if [ "$?" -eq 0 ]
                then
                        echo "OK"
                        break
                else
                        echo "Error. $ip is not available. Exiting ..."
                        echo $ip >> error
                        exit 1
                fi
        done
done
```